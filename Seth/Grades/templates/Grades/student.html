{% load grade_extras %}

<style>
table, th, td {border: 1px solid black; border-collapse: collapse; padding: 1px;}
</style>

<h1>{{ user.first_name }} {{ user.last_name }}</h1>

{% if error_message %}
    <p><strong>{{ error_message }}</strong></p>
{% endif %}

{% if module_student %}
    <table>
    <tr>
        {% for key,values in testdict.items %}
            <th colspan="{{ values|length }}"> {{ coursedict|key:key }} </th>
        {% endfor %}
    </tr>

    <tr>
        {% for key in testdict %}
            {% for test in testdict|key:key %}
                <td> {{ test.name }} </td>
            {% endfor %}
        {% endfor %}
    </tr>
    <tr>
        {% for key in testdict %}
            {% for test in testdict|key:key %}
                <td>{{ gradedict|key:test.id }}</td>
            {% endfor %}   
        {% endfor %}    
    </tr>
    </table>

{% elif student %}

    <table>
        <tr>
            {% for key,values in testdict.items %}
            <th colspan="{{ values|length }}"> {{ coursedict|key:key }} </th>
        {% endfor %}
        </tr>

        <tr>
            {% for key in testdict %}
                {% for test in testdict|key:key %}
                    <td> {{ test.name }} </td>
            {% endfor %}
        {% endfor %}
    </tr>
    <tr>
        {% for key in testdict %}
            {% for test in testdict|key:key %}
                <td>{{ gradedict|key:test }}</td>
            {% endfor %}
        {% endfor %}
        </tr>
    </table>

{% else %}
<p>No courses available</p>
{% endif %}